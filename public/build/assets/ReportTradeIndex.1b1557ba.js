import{u as F,C as h,h as w,c as d,a as g,b as c,d as t,i as m,y as b,t as o,j as u,F as y,n as N,o as _,H as R}from"./app.1b38ef22.js";import{_ as k}from"./Breadcrumb.cb73cb46.js";const T={class:"px-4 grid gap-4"},S={class:"card w-full rounded-none border-2 border-info shadow-xl"},U={class:"card-body"},A={class:"grid md:grid-cols-4"},C={class:"form-control p-1"},M=t("label",{class:"label"},[t("span",{class:"label-text"},"Tanggal Awal")],-1),V=["disabled"],B={key:0,class:"label"},P={class:"label-text-alt text-error"},L={class:"form-control p-1"},H=t("label",{class:"label"},[t("span",{class:"label-text"},"Tanggal Akhir")],-1),J=["disabled"],$={key:0,class:"label"},j={class:"label-text-alt text-error"},E={class:"form-control p-1"},q=t("label",{class:"label"},[t("span",{class:"label-text"},"\xA0")],-1),z={class:"flex space-x-4"},G=t("div",{class:"hidden badge-primary badge-secondary badge badge-accent badge-ghost badge-info badge-error"},null,-1),K={key:0,class:"card w-full rounded-none border-2 border-info shadow-xl"},O={class:"card-body grid gap-4"},Q={class:"w-full text-left text-base text-xs"},W=t("thead",{class:"uppercase bg-primary/20"},[t("tr",null,[t("th",{class:"py-2 px-2"},"#"),t("th",{class:"py-2 px-2"},"Tanggal"),t("th",{class:"py-2 px-2"},"Mobil"),t("th",{class:"py-2 px-2"},"Supir"),t("th",{class:"py-2 px-2 text-right"},"Uang Jalan"),t("th",{class:"py-2 px-2 text-right"},"Beli Sawit"),t("th",{class:"py-2 px-2 text-right"},"Amprah Mobil"),t("th",{class:"py-2 px-2 text-right"},"Upah Supir"),t("th",{class:"py-2 px-2 text-right"},"Upah Muat"),t("th",{class:"py-2 px-2 text-right"},"Jual Sawit"),t("th",{class:"py-2 px-2 text-right"},"Laba / Rugi")])],-1),X={class:"hover:cursor-pointer group border-b"},Y={class:"group-hover:bg-base-300 py-2 px-2"},Z={class:"group-hover:bg-base-300 py-2 px-2"},tt={class:"group-hover:bg-base-300 py-2 px-2"},et={class:"font-bold"},st={class:"text-sm opacity-50"},rt={class:"group-hover:bg-base-300 py-2 px-2"},ot={class:"font-bold"},at={class:"text-sm opacity-50"},nt={class:"group-hover:bg-base-300 py-2 px-2 text-right"},ct={class:"group-hover:bg-base-300 py-2 px-2 text-right"},it={class:"group-hover:bg-base-300 py-2 px-2 text-right"},lt={class:"group-hover:bg-base-300 py-2 px-2 text-right"},dt={class:"group-hover:bg-base-300 py-2 px-2 text-right"},_t={class:"group-hover:bg-base-300 py-2 px-2 text-right"},ut={class:"group-hover:bg-base-300 py-2 px-2 text-right"},pt={key:0,class:"bg-primary/20"},ht=t("th",{class:"py-2 px-2 text-right",colspan:"4"},"Total",-1),gt={class:"py-2 px-2 text-right"},mt={class:"py-2 px-2 text-right"},bt={class:"py-2 px-2 text-right"},yt={class:"py-2 px-2 text-right"},xt={class:"py-2 px-2 text-right"},ft={class:"py-2 px-2 text-right"},vt={class:"py-2 px-2 text-right"},Ft={__name:"ReportTradeIndex",props:{trades:Array,start_date:String,end_date:String},setup(x){const l=x,f=[{url:route("report.index"),label:"Laporan"},{url:null,label:"Pendapatan Per Trip"}],i=F({start_date:l.start_date,end_date:l.end_date}),a=h({trade_cost:[],gross_total:[],car_fee:[],driver_fee:[],loader_fee:[],net_total:[],net_income:[]}),n=h({trade_cost:0,gross_total:0,car_fee:0,driver_fee:0,loader_fee:0,net_total:0,net_income:0});w(()=>{p()});const p=()=>{v(),l.trades&&(l.trades.reduce((s,e)=>{let r=e.trade_cost+e.details_sum_total+e.car_fee*e.net_weight+e.driver_fee*e.net_weight+e.loader_fee*e.net_weight;a.trade_cost.push(e.trade_cost),a.gross_total.push(e.gross_total),a.car_fee.push(e.car_fee*e.net_weight),a.driver_fee.push(e.driver_fee*e.net_weight),a.loader_fee.push(e.loader_fee*e.net_weight),a.net_total.push(e.net_total),a.net_income.push(e.net_total-r)},[]),n.trade_cost=a.trade_cost.reduce((s,e)=>s+=e,0),n.gross_total=a.gross_total.reduce((s,e)=>s+=e,0),n.car_fee=a.car_fee.reduce((s,e)=>s+=e,0),n.driver_fee=a.driver_fee.reduce((s,e)=>s+=e,0),n.loader_fee=a.loader_fee.reduce((s,e)=>s+=e,0),n.net_total=a.net_total.reduce((s,e)=>s+=e,0),n.net_income=a.net_income.reduce((s,e)=>s+=e,0))},v=()=>{a.trade_cost=[],a.gross_total=[],a.car_fee=[],a.driver_fee=[],a.loader_fee=[],a.net_total=[],a.net_income=[],n.trade_cost=0,n.gross_total=0,n.car_fee=0,n.driver_fee=0,n.loader_fee=0,n.net_total=0,n.net_income=0},D=s=>{let e=s.trade_cost+s.details_sum_total+s.car_fee*s.net_weight+s.driver_fee*s.net_weight+s.loader_fee*s.net_weight;return s.net_total-e};return(s,e)=>(_(),d(y,null,[g(c(R),{title:"Pendapatan Per Trip"}),g(k,{links:f}),t("section",T,[t("div",S,[t("div",U,[t("div",A,[t("div",C,[M,m(t("input",{disabled:c(i).processing,"onUpdate:modelValue":e[0]||(e[0]=r=>c(i).start_date=r),type:"date",placeholder:"Tanggal Awal",class:"input input-info input-bordered"},null,8,V),[[b,c(i).start_date]]),c(i).errors.start_date?(_(),d("label",B,[t("span",P,o(c(i).errors.start_date),1)])):u("",!0)]),t("div",L,[H,m(t("input",{disabled:c(i).processing,"onUpdate:modelValue":e[1]||(e[1]=r=>c(i).end_date=r),type:"date",placeholder:"Tanggal Akhir",class:"input input-info input-bordered"},null,8,J),[[b,c(i).end_date]]),c(i).errors.end_date?(_(),d("label",$,[t("span",j,o(c(i).errors.end_date),1)])):u("",!0)]),t("div",E,[q,t("div",z,[t("button",{type:"button",class:"btn",onClick:e[2]||(e[2]=r=>c(i).post(s.route("report.trade.index"),{onSuccess:()=>{p()}}))},"Filter ")])])])])]),G,l.trades?(_(),d("div",K,[t("div",O,[t("table",Q,[W,t("tbody",null,[l.trades?(_(!0),d(y,{key:0},N(l.trades,(r,I)=>(_(),d("tr",X,[t("th",Y,o(I+1),1),t("td",Z,o(r.trade_date),1),t("td",tt,[t("div",null,[t("div",et,o(r.car.no_pol),1),t("div",st,o(r.car.name.toUpperCase()),1)])]),t("td",rt,[t("div",null,[t("div",ot,o(r.driver.name.toUpperCase()),1),t("div",at,o(r.driver.phone),1)])]),t("td",nt,o(Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(r.trade_cost)),1),t("td",ct,o(Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(r.details_sum_total)),1),t("td",it,o(Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(r.car_fee*r.net_weight)),1),t("td",lt,o(Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(r.driver_fee*r.net_weight)),1),t("td",dt,o(Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(r.loader_fee*r.net_weight)),1),t("td",_t,o(Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(r.net_total)),1),t("td",ut,o(Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(D(r))),1)]))),256)):u("",!0)]),l.trades?(_(),d("tfoot",pt,[t("tr",null,[ht,t("th",gt,o(Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(n.trade_cost)),1),t("th",mt,o(Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(n.gross_total)),1),t("th",bt,o(Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(n.car_fee)),1),t("th",yt,o(Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(n.driver_fee)),1),t("th",xt,o(Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(n.loader_fee)),1),t("th",ft,o(Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(n.net_total)),1),t("th",vt,o(Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(n.net_income)),1)])])):u("",!0)])])])):u("",!0)])],64))}};export{Ft as default};
