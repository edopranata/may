import{g as _,z as h,u as y,c,a as d,b as a,e as w,i as k,x as I,d as t,t as l,s as D,w as F,j as p,F as B,o as u,H as T,f as N,S as U}from"./app.f33b5c0d.js";import{_ as C}from"./Breadcrumb.de4c8a73.js";import{_ as E}from"./PageTitle.dd8debfd.js";import"./multiselect.ddaa6662.js";import{s as b}from"./library.595eb791.js";const S=t("div",{class:"hidden bg-warning"},null,-1),V={class:"modal modal-bottom sm:modal-middle"},$={class:"modal-box"},H={class:"font-bold text-lg mb-5"},P={class:"modal-action"},R=["disabled"],K=t("label",{for:"modal-save",class:"btn btn-warning"},"Batal",-1),M={class:"px-4 grid gap-4"},j={class:"card w-full rounded-none border-2 border-info shadow-xl"},z={class:"grid md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4"},A={class:"form-control w-full md:col-span-2 lg:col-span-3 xl:col-span-2"},J=t("label",{class:"label"},[t("span",{class:"label-text"},"Nama Petani")],-1),O=["value"],q={class:"form-control w-full"},G=t("label",{class:"label"},[t("span",{class:"label-text"},"Berat")],-1),L={class:"label h-8"},Q={key:0,class:"label-text-alt text-error"},W={class:"form-control w-full"},X=t("label",{class:"label"},[t("span",{class:"label-text"},"Harga Beli")],-1),Y={class:"label h-8"},Z={key:0,class:"label-text-alt text-error"},tt={class:"form-control w-full"},et=t("label",{class:"label"},[t("span",{class:"label-text"},"Total")],-1),at={class:"form-control w-full"},st={class:"form-control w-full pt-9"},ot=["disabled"],lt={class:"w-full overflow-y-auto mt-10 md:mt-0"},rt=t("h2",{class:"text-2xl p-2 font-bold"},"Data yang sudah terinput",-1),nt={class:"w-full text-left text-base min-w-4xl"},it=t("thead",{class:"text-sm uppercase bg-primary/20"},[t("tr",null,[t("th",{class:"py-3 px-6"},"#"),t("th",{class:"py-3 px-6"},"Petani"),t("th",{class:"py-3 px-6 text-right"},"Berat"),t("th",{class:"py-3 px-6 text-right"},"Harga"),t("th",{class:"py-3 px-6 text-right"},"Total")])],-1),dt={key:0,class:"hover:cursor-pointer group border-b"},ct=t("td",{class:"group-hover:bg-base-300 py-4 px-6"},l(1),-1),ut={class:"group-hover:bg-base-300 py-4 px-6"},pt={class:"font-bold"},bt={class:"text-sm opacity-50"},mt={class:"group-hover:bg-base-300 py-4 px-6 text-right"},_t={class:"group-hover:bg-base-300 py-4 px-6 text-right"},ht={class:"group-hover:bg-base-300 py-4 px-6 text-right"},wt={__name:"TradeFarmerEdit",props:{trade:Object},setup(f){const s=f,g=[{url:route("transaction.index"),label:"Transaksi"},{url:route("transaction.trade.index"),label:"Beli Sawit Petani"},{url:null,label:"Timbangan Kebun "+s.trade.farmer.name}],i=_(!1),m=_();h(i,n=>{n&&setTimeout(function(){m.value.focus()},100)});const e=y({weight:s.trade.weight,price:s.trade.price,total:s.trade.total,difference_total:0});h(()=>U.cloneDeep(e),(n,o)=>{n.weight&&n.price&&(e.total=n.weight*n.price,e.difference_total=n.total-s.trade.total)});const v=()=>{e.patch(route("transaction.trade.farmer",s.trade.id),{onSuccess:()=>{x()},onFinish:()=>{i.value=!1}})},x=()=>{e.clearErrors(),e.reset(),e.defaults({weight:0,price:0,total:0}),i.value=!1};return(n,o)=>(u(),c(B,null,[d(a(T),{title:"Transaksi Jual Beli"}),S,d(C,{links:g}),d(E,{classes:"bg-base-content",class:""},{default:w(()=>[N("Perubahan data Timbangan Kebun "+l(s.trade.farmer.name),1)]),_:1}),k(t("input",{type:"checkbox",id:"modal-save","onUpdate:modelValue":o[0]||(o[0]=r=>i.value=r),class:"modal-toggle"},null,512),[[I,i.value]]),t("div",V,[t("div",$,[t("h3",H,l(s.trade.farmer_status?"Invoice telah terbit, Ubah data timbangan?":"Ubah data timbangan?"),1),t("p",{class:D(["p-4 rounded-lg",s.trade.farmer_status!==null?"bg-error":"bg-warning"])},l(s.trade.farmer_status?"Merubah data timbangan akan merubah Invoice yang sudah di terbitkan dan merubah laporan pendapatan / pengeluaran!":"Apkah anda yakin akan merubah data timbangan?"),3),t("div",P,[t("button",{disabled:a(e).processing,ref_key:"btn_save",ref:m,type:"button",class:"btn",onClick:v},"Ubah",8,R),K])])]),t("section",M,[t("div",j,[t("form",{onSubmit:o[6]||(o[6]=F(r=>i.value=!0,["prevent"])),class:"card-body"},[t("div",z,[t("div",A,[J,t("input",{type:"text",value:s.trade.farmer.name,class:"input input-bordered",readonly:""},null,8,O)]),t("div",q,[G,d(a(b),{onFocus:o[1]||(o[1]=r=>a(e).clearErrors("weight")),options:{precision:0,prefix:"",suffix:" Kg",isInteger:!0},readonly:a(e).processing,value:a(e).weight,"onUpdate:value":o[2]||(o[2]=r=>a(e).weight=r),class:"input input-bordered"},null,8,["readonly","value"]),t("label",L,[a(e).errors.weight?(u(),c("span",Q,l(a(e).errors.weight),1)):p("",!0)])]),t("div",W,[X,d(a(b),{onFocus:o[3]||(o[3]=r=>a(e).clearErrors("price")),options:{precision:0,prefix:"Rp. ",suffix:"",isInteger:!0},readonly:a(e).processing,value:a(e).price,"onUpdate:value":o[4]||(o[4]=r=>a(e).price=r),class:"input input-bordered"},null,8,["options","readonly","value"]),t("label",Y,[a(e).errors.price?(u(),c("span",Z,l(a(e).errors.price),1)):p("",!0)])]),t("div",tt,[et,t("div",at,[d(a(b),{options:{precision:0,prefix:"Rp. ",suffix:"",isInteger:!0},readonly:"",value:a(e).total,"onUpdate:value":o[5]||(o[5]=r=>a(e).total=r),class:"input input-bordered"},null,8,["options","value"])])]),t("div",st,[t("button",{disabled:a(e).processing,type:"submit",class:"btn btn-primary"},"Ubah Data",8,ot)])]),t("div",lt,[rt,t("table",nt,[it,t("tbody",null,[s.trade?(u(),c("tr",dt,[ct,t("td",ut,[t("div",null,[t("div",pt,l(s.trade.farmer.name),1),t("div",bt,l(s.trade.farmer.phone),1)])]),t("td",mt,l(Intl.NumberFormat("id-ID",{style:"unit",unit:"kilogram"}).format(s.trade.weight)),1),t("td",_t,l(Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(s.trade.price)),1),t("td",ht,l(Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(s.trade.total)),1)])):p("",!0)])])])],32)])])],64))}};export{wt as default};
