import{g as x,z as I,u as F,c as n,a as p,b as e,e as v,i as u,x as D,d as t,y as P,t as r,j as d,I as f,F as _,n as g,w as B,k as y,o as l,H as N,f as S,q as U,_ as V,L as $}from"./app.1b38ef22.js";import{_ as C}from"./Breadcrumb.cb73cb46.js";import{_ as M}from"./PageTitle.0dcaf6ba.js";import{_ as j}from"./Pagination.9194b4da.js";import{s as E}from"./library.2a2b5b59.js";const L={class:"modal modal-bottom sm:modal-middle"},R={class:"modal-box"},A=t("h3",{class:"font-bold text-lg"},"Lanjutkan input timbangan kebun?",-1),H=t("p",{class:"py-4"},"Proses, dan lanjutkan ke halaman input data timbangan kebun petani",-1),K={class:"modal-action"},q=t("label",{for:"modal-save",class:"btn btn-warning"},"Batal",-1),z={class:"px-4 grid gap-4"},J={class:"card w-full rounded-none border-2 border-info shadow-xl"},O={class:"card-body grid md:grid-cols-4 gap-4"},G={class:"form-control w-full"},Q=t("label",{class:"label"},[t("span",{class:"label-text"},"Tanggal Transaksi")],-1),W=["readonly"],X={key:0,class:"label"},Y={class:"label-text-alt text-error"},Z={class:"form-control w-full"},tt=t("label",{class:"label"},[t("span",{class:"label-text"},"Mobil")],-1),st=["disabled"],et=t("option",{value:"0"},"Pilih Mobil",-1),at=["value"],ot={key:0,class:"label"},rt={class:"label-text-alt text-error"},lt={class:"form-control w-full"},nt=t("label",{class:"label"},[t("span",{class:"label-text"},"Supir")],-1),it=["disabled"],dt=t("option",{value:"0"},"Pilih Supir",-1),ct=["value"],pt={key:0,class:"label"},ut={class:"label-text-alt text-error"},_t={class:"form-control w-full"},bt=t("label",{class:"label"},[t("span",{class:"label-text"},"Uang Jalan")],-1),ht={key:0,class:"label"},gt={class:"label-text-alt text-error"},mt={class:"card-actions justify-end p-8"},xt=["disabled"],vt={class:"card w-full rounded-none border-2 border-info shadow-xl"},ft={class:"card-body"},yt={class:"w-full text-left text-base"},kt=t("thead",{class:"text-sm uppercase bg-primary/20"},[t("tr",null,[t("th",{class:"py-3 px-6",rowspan:"2"},"#"),t("th",{class:"py-3 px-6",rowspan:"2"},"Tanggal"),t("th",{class:"py-3 px-6",rowspan:"2"},"Supir"),t("th",{class:"py-3 px-6",rowspan:"2"},"Petani"),t("th",{class:"py-3 px-6 border-b border-primary-content text-center",colspan:"2"},"Timbangan Kebun"),t("th",{class:"py-3 px-6 border-b border-primary-content text-center",colspan:"2"},"Timbangan Pabrik"),t("th",{class:"py-3 px-6",rowspan:"2"})]),t("tr",null,[t("th",{class:"py-3 px-6 text-right"},"Tonase"),t("th",{class:"py-3 px-6 text-right"},"Total"),t("th",{class:"py-3 px-6 text-right"},"Tonase"),t("th",{class:"py-3 px-6 text-right"},"Total")])],-1),wt={class:"group-hover:bg-base-300 py-4 px-6"},Tt={class:"group-hover:bg-base-300 py-4 px-6"},It={class:"group-hover:bg-base-300 py-4 px-6"},Ft={class:"font-bold"},Dt={class:"text-sm opacity-50"},Pt={class:"group-hover:bg-base-300 py-4 px-6 text-center"},Bt={class:"group-hover:bg-base-300 py-4 px-6 text-right"},Nt={class:"group-hover:bg-base-300 py-4 px-6 text-right"},St={class:"group-hover:bg-base-300 py-4 px-6 text-right"},Ut={class:"group-hover:bg-base-300 py-4 px-6 text-right"},Vt={class:"group-hover:bg-base-300 py-4 px-6"},Lt={__name:"TradeIndex",props:{cars:Array,drivers:Array,trades:Object},setup(k){const i=k,w=[{url:route("transaction.index"),label:"Transaksi"},{url:null,label:"Beli Sawit Petani"}],c=x(!1),m=x();I(c,b=>{b&&setTimeout(function(){m.value.focus()},100)});const a=F({date:null,car_id:0,driver_id:0,trade_cost:0}),T=()=>{a.post(route("transaction.trade.store"),{onFinish:()=>{c.value=!1}})};return(b,o)=>(l(),n(_,null,[p(e(N),{title:"Beli Sawit Petani"}),p(C,{links:w}),p(M,{classes:"bg-base-content"},{default:v(()=>[S("Beli Sawit Petani")]),_:1}),u(t("input",{type:"checkbox",id:"modal-save","onUpdate:modelValue":o[0]||(o[0]=s=>c.value=s),class:"modal-toggle"},null,512),[[D,c.value]]),t("div",L,[t("div",R,[A,H,t("div",K,[t("button",{ref_key:"btn_save",ref:m,type:"button",class:"btn",onClick:T},"Proses",512),q])])]),t("section",z,[t("div",J,[t("form",null,[t("div",O,[t("div",G,[Q,u(t("input",{readonly:e(a).processing,onFocus:o[1]||(o[1]=s=>e(a).clearErrors("date")),"onUpdate:modelValue":o[2]||(o[2]=s=>e(a).date=s),type:"date",class:"input input-info input-bordered w-full"},null,40,W),[[P,e(a).date]]),e(a).errors.date?(l(),n("label",X,[t("span",Y,r(e(a).errors.date),1)])):d("",!0)]),t("div",Z,[tt,u(t("select",{onFocus:o[3]||(o[3]=s=>e(a).clearErrors("car_id")),disabled:e(a).processing,"onUpdate:modelValue":o[4]||(o[4]=s=>e(a).car_id=s),class:"select select-info select-bordered"},[et,(l(!0),n(_,null,g(i.cars,(s,h)=>(l(),n("option",{value:s.id,key:s.id},r(s.text.toUpperCase()),9,at))),128))],40,st),[[f,e(a).car_id]]),e(a).errors.car_id?(l(),n("label",ot,[t("span",rt,r(e(a).errors.car_id),1)])):d("",!0)]),t("div",lt,[nt,u(t("select",{onFocus:o[5]||(o[5]=s=>e(a).clearErrors("driver_id")),disabled:e(a).processing,"onUpdate:modelValue":o[6]||(o[6]=s=>e(a).driver_id=s),class:"select select-info select-bordered"},[dt,(l(!0),n(_,null,g(i.drivers,(s,h)=>(l(),n("option",{value:s.id,key:s.id},r(s.text.toUpperCase()),9,ct))),128))],40,it),[[f,e(a).driver_id]]),e(a).errors.driver_id?(l(),n("label",pt,[t("span",ut,r(e(a).errors.driver_id),1)])):d("",!0)]),t("div",_t,[bt,p(e(E),{options:{precision:0,prefix:"Rp ",isInteger:!0},readonly:e(a).processing,value:e(a).trade_cost,"onUpdate:value":o[7]||(o[7]=s=>e(a).trade_cost=s),class:"input input-info input-bordered w-full"},null,8,["readonly","value"]),e(a).errors.trade_cost?(l(),n("label",ht,[t("span",gt,r(e(a).errors.trade_cost),1)])):d("",!0)])]),t("div",mt,[t("button",{disabled:e(a).processing,onClick:o[8]||(o[8]=B(s=>c.value=!0,["prevent"])),class:"btn btn-primary"},"Input Timbangan Kebun",8,xt)])])]),t("div",vt,[t("div",ft,[t("table",yt,[kt,t("tbody",null,[i.trades.data.length?(l(!0),n(_,{key:0},g(i.trades.data,(s,h)=>(l(),y(e($),{as:"tr",href:b.route("transaction.trade.edit",s.id),class:"hover:cursor-pointer group border-b"},{default:v(()=>[t("th",wt,r(i.trades.from+h),1),t("td",Tt,r(s.trade_date),1),t("td",It,[t("div",null,[t("div",Ft,r(s.driver.name),1),t("div",Dt,r(s.car.no_pol),1)])]),t("td",Pt,r(s.details.length)+" Petani",1),t("td",Bt,r(Intl.NumberFormat("id-ID",{style:"unit",unit:"kilogram"}).format(s.gross_weight)),1),t("td",Nt,r(Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(s.gross_total)),1),t("td",St,r(Intl.NumberFormat("id-ID",{style:"unit",unit:"kilogram"}).format(s.net_weight)),1),t("td",Ut,r(Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(s.net_total)),1),t("td",Vt,[p(V,{path:e(U)},null,8,["path"])])]),_:2},1032,["href"]))),256)):d("",!0)])]),i.trades.data.length?(l(),y(j,{key:0,links:i.trades.links},null,8,["links"])):d("",!0)])])])],64))}};export{Lt as default};
