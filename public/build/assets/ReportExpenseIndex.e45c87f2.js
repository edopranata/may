import{u as I,C as F,h as N,c as o,a as _,b as s,d as e,i as x,I as k,F as p,n as u,t as c,j as h,y as w,e as T,o as n,H as V,_ as B,J as L,f as R,L as C}from"./app.1b38ef22.js";import{_ as P}from"./Breadcrumb.cb73cb46.js";const A={class:"px-4 grid gap-4"},M={class:"card w-full rounded-none border-2 border-info shadow-xl"},S={class:"card-body"},$={class:"grid md:grid-cols-4"},E={class:"form-control p-1"},H=e("label",{class:"label"},[e("span",{class:"label-text"},"Bulan")],-1),U=["disabled"],j=e("option",{value:"0"},"Bulan",-1),J=["value"],O={key:0,class:"label"},q={class:"label-text-alt text-error"},z={class:"form-control p-1"},G=e("label",{class:"label"},[e("span",{class:"label-text"},"Tahun")],-1),K=["disabled"],Q={key:0,class:"label"},W={class:"label-text-alt text-error"},X={class:"form-control p-1"},Y=e("label",{class:"label"},[e("span",{class:"label-text"},"\xA0")],-1),Z={class:"flex space-x-4"},ee=e("div",{class:"hidden badge-primary badge-secondary badge badge-accent badge-ghost badge-info badge-error"},null,-1),te={class:"card w-full rounded-none border-2 border-info shadow-xl"},se={class:"card-body grid gap-4"},oe={class:"w-full text-left text-base"},ne={class:"text-sm uppercase bg-primary/20"},re=e("th",{class:"py-3 px-6"},"#",-1),ae=e("th",{class:"py-3 px-6"},"Tanggal",-1),le={class:"py-3 px-6 text-right"},ce=e("th",{class:"py-3 px-6 text-right"},"Total Pengeluaran",-1),ie={class:"hover:cursor-pointer group border-b"},de={class:"group-hover:bg-base-300 py-4 px-6"},pe={class:"group-hover:bg-base-300 py-4 px-6"},ue={class:"group-hover:bg-base-300 py-4 px-6 text-right"},_e={class:"group-hover:bg-base-300 py-4 px-6 text-right"},he={key:1},be=e("td",{colspan:"4",class:"text-center border-b-2"},"No Data",-1),ye=[be],me={class:"bg-primary/20"},xe={key:0},ge=e("th",{class:"py-4 px-6"},null,-1),fe=e("th",{class:"py-4 px-6"},"Total",-1),ve={class:"py-4 px-4 text-right"},De={class:"py-4 px-6 text-right"},ke={__name:"ReportExpenseIndex",props:{expenses:Array,types:Array,year:Number,month:Number},setup(g){const l=g,f=[{url:null,label:"Laporan"}],r=I({year:l.year,month:l.month}),b=F({expense:Number,total:Array});N(()=>{y()});const y=()=>{let i=l.expenses.reduce((a,t)=>(a.push(t.expense?t.expense.balance:0),a),[]);b.expense=i.reduce((a,t)=>a+=t,0)},v=(i,a)=>{let t=0;return i&&i.hasOwnProperty("details")&&(i.details.length>0?t=i.details.filter(function(d){return d.type===a})[0]:t=0),t||t!==void 0?t.amount:t};return(i,a)=>(n(),o(p,null,[_(s(V),{title:"Laporan"}),_(P,{links:f}),e("section",A,[e("div",M,[e("div",S,[e("div",$,[e("div",E,[H,x(e("select",{disabled:s(r).processing,"onUpdate:modelValue":a[0]||(a[0]=t=>s(r).month=t),class:"select select-info select-bordered"},[j,(n(),o(p,null,u(12,(t,d)=>e("option",{value:t,key:d},c(t),9,J)),64))],8,U),[[k,s(r).month]]),s(r).errors.month?(n(),o("label",O,[e("span",q,c(s(r).errors.month),1)])):h("",!0)]),e("div",z,[G,x(e("input",{disabled:s(r).processing,"onUpdate:modelValue":a[1]||(a[1]=t=>s(r).year=t),type:"number",placeholder:"Tahun",class:"input input-info input-bordered"},null,8,K),[[w,s(r).year]]),s(r).errors.year?(n(),o("label",Q,[e("span",W,c(s(r).errors.year),1)])):h("",!0)]),e("div",X,[Y,e("div",Z,[e("button",{type:"button",class:"btn",onClick:a[2]||(a[2]=t=>s(r).post(i.route("report.expense.index"),{onSuccess:()=>{y()}}))},"Filter "),_(s(C),{disabled:l.expenses.length<1,as:"button",class:"btn",href:i.route("print.expense.index"),data:{month:s(r).month,year:s(r).year}},{default:T(()=>[_(B,{path:s(L)},null,8,["path"]),R(" Print ")]),_:1},8,["disabled","href","data"])])])])])]),ee,e("div",te,[e("div",se,[e("table",oe,[e("thead",ne,[e("tr",null,[re,ae,(n(!0),o(p,null,u(l.types,(t,d)=>(n(),o("th",le,c(t.type),1))),256)),ce])]),e("tbody",null,[l.expenses.length>0?(n(!0),o(p,{key:0},u(l.expenses,(t,d)=>(n(),o("tr",ie,[e("th",de,c(d+1),1),e("td",pe,c(t.date),1),(n(!0),o(p,null,u(l.types,(D,Ie)=>{var m;return n(),o("td",ue,c(Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format((m=v(t.expense,D.type))!=null?m:0)),1)}),256)),e("td",_e,c(Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(t.expense?t.expense.balance:0)),1)]))),256)):(n(),o("tr",he,ye))]),e("tfoot",me,[l.expenses.length>0?(n(),o("tr",xe,[ge,fe,(n(!0),o(p,null,u(l.types,(t,d)=>(n(),o("th",ve,c(Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(t.balance)),1))),256)),e("th",De,c(Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(b.expense)),1)])):h("",!0)])])])])])],64))}};export{ke as default};
